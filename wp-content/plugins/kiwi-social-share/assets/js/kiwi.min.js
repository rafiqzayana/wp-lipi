"use strict";var kiwi={loaded:0,interface:{saveChangesNotification:function(i){var t=i("#sl-kiwi"),e=t.find(".kiwi-notification-popup"),i=e.find("input"),a=t.find("form").find("#submit");t.find("input").on("change",function(){e.slideDown(300)}),i.on("click",function(){a.click()})},preloader:function(i){var t=i("#sl-kiwi").find(".overlay"),e=i('ul[data-id="networks_ordering_floating_bar"]');setTimeout(function(){t.find(".overlay-content").fadeOut(400,function(){t.removeClass("active").css({"z-index":0,bottom:"initial",right:"initial"}),e.css({right:"-46px",opacity:1,"z-index":1})})},1500)},colorFields:function(o){var i=o(".kiwi-styles .epsilon-ui-color input"),t=o(".kiwi-styles .epsilon-custom-colors .epsilon-ui-color input");o(".shift a");i.wpColorPicker(),o('input[name="kiwi_general_settings[styles_colors]"]:radio').change(function(){switch(o(this).val()){case"custom":o.each(t,function(){o(this).val(o(this).data("color-custom")).trigger("change")});break;case"monochrome":o.each(t,function(){o(this).val(o(this).data("color-monochrome")).trigger("change")});break;default:o.each(t,function(){o(this).val(o(this).data("color-original")).trigger("change")})}}),o.each(i,function(){var i=o(this).parents(".epsilon-ui-color"),a=i.find("em"),n=o(this),t=i.parent().parent().data("network");o(".shift").find(".kiwi-nw-"+t),n.wpColorPicker("color"),i.attr("data-prop");o(this).wpColorPicker({change:function(i,t){var e=n.wpColorPicker("color");a.html(e)}})});var a=o(".floating-bar-background input");a.length&&a.wpColorPicker({defaultColor:"#272F32",change:function(i,t){var e=a.wpColorPicker("color");o(".floating-bar-background").find("em").html(e)}}),kiwi.loaded+=1},toggleHelper:function(t){t(".epsilon-ui-option input").keypress(function(i){t(this).closest(".epsilon-ui-option").find(".epsilon-ui-overlay.active").length&&36<i.keyCode&&i.keyCode<41&&i.preventDefault()}),kiwi.loaded+=1},tabs:function(t){t(".epsilon-ui-tabs a").click(function(){if(t(this).closest("li").hasClass("selected"))return 0;var i=t(this).attr("data-tab");return t(this).closest("ul").find(".selected").removeClass("selected"),t(this).closest("li").addClass("selected"),t(".sl-kiwi-content .epsilon-tab-active").hide().removeClass("epsilon-tab-active"),t(".sl-kiwi-content ."+i).show(700).addClass("epsilon-tab-active"),document.cookie="tab="+i,t(document).trigger("KiwiTabChanged"),!1}),kiwi.loaded+=1}},interactions:{registration:function(e){e(".kiwi-ajax-activation").on("click",function(i){i.preventDefault();i={action:"kiwi_social_share_set_option",args:{group:"kiwi_registration",option:"license_key",default:!1,value:e(this).parent().find("#kiwi_registration").val()}};jQuery.ajax({dataType:"json",type:"POST",url:ajaxurl,data:i,complete:function(i){i.responseText&&"Success"===i.responseText&&location.reload()}})}),e(".kiwi-ajax-registration-action").on("click",function(i){i.preventDefault();var t=e(this),i={action:"kiwi_social_share_edd_helper",args:{todo:e(this).attr("data-action")}};jQuery.ajax({dataType:"json",type:"POST",url:ajaxurl,data:i,complete:function(i){if(i.responseJSON.status)switch(i.responseJSON.message){case"active":t.attr("data-action","deactivate").addClass("button").removeClass("button-primary").val("Deactivate License");break;case"site_inactive":t.attr("data-action","activate").addClass("button-primary").removeClass("button").val("Activate License")}}})})},networks:function(t){t('.sl-kiwi-tab-networks .sl-kiwi-networks input[data-source="article-bar"]').on("click change",function(){var i=t(this).attr("data-list-item");t(this).is(":checked")?t('.sl-kiwi-dragdrop ul[data-id="networks_ordering"] li .'+i).closest("li").removeClass("sl-kiwi-item-remove").addClass("sl-kiwi-item-add"):t('.sl-kiwi-dragdrop ul[data-id="networks_ordering"] li .'+i).closest("li").removeClass("sl-kiwi-item-add").addClass("sl-kiwi-item-remove")}),t('.sl-kiwi-tab-networks .sl-kiwi-networks input[data-source="floating-bar"]').on("click change",function(){var i=t(this).attr("data-list-item");t(this).is(":checked")?t('.sl-kiwi-dragdrop ul[data-id="networks_ordering_floating_bar"] li .'+i).closest("li").removeClass("sl-kiwi-item-remove").addClass("sl-kiwi-item-add"):t('.sl-kiwi-dragdrop ul[data-id="networks_ordering_floating_bar"] li .'+i).closest("li").removeClass("sl-kiwi-item-add").addClass("sl-kiwi-item-remove")}),kiwi.loaded+=1},articleStyling:function(i){i('input[name="kiwi_general_settings[article_bar_style]"]:radio').change(function(){i(".sl-kiwi-dragdrop").find("[data-id='networks_ordering']").attr("data-style",this.value)})},toggles:function(t){t(".epsilon-ui-toggle input").click(function(){t(this).prop("checked")?t(this).val("on"):t(this).val("");var i=t(this).closest(".sl-kiwi-opt-group");t(this).is(":checked")?t(".epsilon-ui-overlay",i).removeClass("active"):t(".epsilon-ui-overlay",i).addClass("active")}),kiwi.loaded+=1},radioToggles:function(i){i(".sl-kiwi-radio-post-types .epsilon-ui-radio input").click(function(){"all"===i(this).val()?i(this).parent().parent().find(".epsilon-ui-checklist").slideUp():"custom"===i(this).val()&&i(this).parent().parent().find(".epsilon-ui-checklist").slideDown()}),i(".epsilon-ui-radio-toggle input").click(function(){"original"===i(this).val()?i(this).parents(".sl-kiwi-tab-networks").find(".epsilon-ui-overlay").addClass("active"):i(this).parents(".sl-kiwi-tab-networks").find(".epsilon-ui-overlay").removeClass("active")}),kiwi.loaded+=1},shapes:function(i){i('input[name="kiwi_general_settings[button_shape]"]:radio').change(function(){i(".sl-kiwi-dragdrop").find("[data-id='networks_ordering']").attr("class",this.value)}),i('input[name="kiwi_general_settings[button_shape_floating]"]:radio').change(function(){i(".sl-kiwi-dragdrop").find("[data-id='networks_ordering_floating_bar']").attr("class",this.value)}),kiwi.loaded+=1},allCheckbox:function(t){var e,i=t('input[name="kiwi_general_settings[networks_floating_bar][]"]'),a=t('input[name="kiwi_general_settings[networks_floating_bar][]"]:checked'),n=t('input[name="kiwi_general_settings[networks_article_bar][]"]'),o=t('input[name="kiwi_general_settings[networks_article_bar][]"]:checked');i.length===a.length&&t("#floating-bar-all").prop("checked",!0),n.length===o.length&&t("#social-bar-all").prop("checked",!0),t("#social-bar-all, #floating-bar-all").on("click",function(i){"floating-bar-all"===t(this).attr("id")?(e=t(this).prop("checked"),t('input[name="kiwi_general_settings[networks_floating_bar][]"]').prop("checked",e).change()):(e=t(this).prop("checked"),t('input[name="kiwi_general_settings[networks_article_bar][]"]').prop("checked",e).change())})},sortable:function(o){o(".sl-kiwi-dragdrop ul[data-id='networks_ordering']").sortable({placeholder:"sl-kiwi-dragdrop-placeholder",stop:function(i,t){var e=[],a=o(this).attr("data-id");o('.sl-kiwi-dragdrop ul[data-id="networks_ordering"] li').each(function(i,t){t=o(t).attr("data-item");e.push(t)});var n=e.join();o("#kiwi_"+a).val(n).trigger("change")},create:function(i,t){kiwi.loaded+=1}}).disableSelection()},upsellModalPage:function(s){var t=s(".kiwi-modal");s(".ui-locked, .epsilon-ui-locked, .epsilon-locked").on("click",function(i){t.fadeIn(200,function(){t.addClass("in")})}),s('input[name="kiwi_product_upsell[type]"]').on("change",function(){"business"===s(this).val()?s(".kiwi-modal").find(".company-group").fadeIn(300):(t.find(".company-group").fadeOut(300),t.find(".company-group input").val(""))}),s(".kiwi-modal .close-modal").on("click",function(i){i.preventDefault(),t.removeClass("in"),setTimeout(function(){t.fadeOut(200),t.find("#page-one").show(),t.find("#page-two").hide(),t.find(".modal-footer").show(),t.find(".modal-title").text(kiwi_locale.kiwi_step_one_title),t.find(".modal-subtitle").text(kiwi_locale.kiwi_step_one_subtitle)},200)}),s(".button-modal").on("click",function(i){var t,e,a,n,o;i.preventDefault(),"modal-buy-now"===s(this).attr("data-action")&&(t=s("#page-one"),e=s("#page-two"),a=s(".kiwi-modal .modal-footer"),i=s(".kiwi-modal .modal-header-content"),n=i.find(".modal-title"),o=i.find(".modal-subtitle"),n.fadeOut(300,function(){n.text(kiwi_locale.kiwi_step_two_title),n.fadeIn(300)}),o.fadeOut(300,function(){o.text(kiwi_locale.kiwi_step_two_subtitle),o.fadeIn(300)}),a.fadeOut(300),t.fadeOut(300,function(){e.fadeIn(300)}))})},handleModalPageForm:function(t){t(".button-modal").on("click",function(i){i.preventDefault(),"continue-to-checkout"===t(this).attr("data-action")&&(i={customer:{first_name:t('input[name="kiwi_product_upsell[first_name]"]').val(),last_name:t('input[name="kiwi_product_upsell[last_name]"]').val(),email:t('input[name="kiwi_product_upsell[email]"]').val(),vat:t('input[name="kiwi_product_upsell[vat]"]').val(),company_name:t('input[name="kiwi_product_upsell[company_name]"]').val()},product:{id:t('input[name="kiwi_product_upsell[product]"]').val(),options:{},quantity:"1"}},i=JSON.stringify(i),i=encodeURIComponent(btoa(i)),i=window.open("https://www.machothemes.com/checkout/?mthash="+i),window.focus&&i.focus())})}},frontend:{modalPopup:function(n){n('a[data-class="popup"]').on("click",function(i){var t;i.preventDefault();var e=window.open(n(this).attr("href"),"","height=500,width=500");window.focus&&e.focus();var a,i=n(this).attr("data-network"),e=n(this).parent();return e.is("li")?(a=e.parent().attr("data-tracking-container"),t=kiwi.frontend.checkTracking(this)):e.is("blockquote")&&(a="click-to-tweet",t="true"===n(this).attr("data-tracking")),"function"==typeof ga&&!0===t&&ga("send","event","kiwi_social_media","kiwi_"+a+"_"+i+"_share"),!1})},highlighted:{start:0,end:0,url:null,title:null,content:null},highlightShare:function(n){var i=n(".kiwi-highlighter-excerpt-area, .kiwi-highlighter-content-area");n(".kiwi-highlight-sharer a").on("click",function(i){i.preventDefault();var t=kiwi.frontend.highlighted,i=null;kiwi.frontend.highlighted={},i=(i=this.href.replace("%url%",encodeURIComponent(t.url))).replace("%text%",encodeURIComponent(t.content)),window.open(i,"tweethighlight","width=575,height=430,toolbar=false,menubar=false,location=false,status=false");i="true"===n(this).attr("data-tracking");return"function"==typeof ga&&!0==i&&ga("send","event","kiwi_social_media","kiwi_highlight-to-tweet_twitter_share"),n(".kiwi-highlight-sharer").css({display:"none"}),!1}),n("body").on("mousedown vmouseup",function(i){var t=n(i.target).parent(),i=n(".kiwi-highlight-sharer");t.hasClass("kiwi-highlight-sharer")||t.is("a")||i.is(":not(:hidden)")&&i.css({display:"none"})}),i.on("mousedown vmouseup",function(i){kiwi.frontend.highlighted.start=i.pageX;i=n(".kiwi-highlight-sharer");i.is(":not(:hidden)")&&i.css({display:"none"})}),i.on("mouseup vmouseup",function(i){var t,e=kiwi.frontend.getSelected(),a=n(".kiwi-highlight-sharer");kiwi.frontend.highlighted.end=i.pageX,void 0!==e?(t={start:i.pageX,end:i.pageX,url:n(this).attr("data-url"),title:n(this).attr("data-title"),content:e},e=parseInt(Math.abs((kiwi.frontend.highlighted.start-kiwi.frontend.highlighted.end)/2)),a.css({position:"absolute",left:i.pageX-e,top:i.pageY-50,display:"block"}),kiwi.frontend.highlighted=t):a.css({display:"none"})}),document.addEventListener("selectionchange",function(){kiwi.frontend.getSelected()},!1)},getSelected:function(){var i=window.getSelection().toString();if(""!==i)return i},checkTracking:function(i){return"true"===jQuery(i).parents("ul").attr("data-tracking")},handleFloatingBarDisplay:function(i){var t=i(".kiwi-floating-bar"),e=t.hasClass("bottom")?"bottom":t.hasClass("right")?"right":"left";setTimeout(function(){switch(e){case"bottom":t.css({bottom:0});break;case"right":t.css({right:0});break;default:t.css({left:0})}},300)}},init:function(i){kiwi.interface.tabs(i),kiwi.interface.toggleHelper(i),kiwi.interface.colorFields(i),kiwi.interface.saveChangesNotification(i),kiwi.interactions.toggles(i),kiwi.interactions.radioToggles(i),kiwi.interactions.networks(i),kiwi.interactions.shapes(i),kiwi.frontend.modalPopup(i),kiwi.interactions.sortable(i),kiwi.interactions.allCheckbox(i),kiwi.interactions.articleStyling(i);var t=setInterval(function(){8<=kiwi.loaded&&(i(document).trigger("KiwiObjectsLoaded"),clearInterval(t))},100)}};